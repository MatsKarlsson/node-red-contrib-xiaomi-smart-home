<script type="text/x-red" data-template-name="xiaomi-smart-home">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-sid"><i class="fa fa-key"></i> Sid</label>
        <input type="text" id="node-input-sid" placeholder="Sid">
        <label for="node-input-password"><i class="fa fa-key"></i> Password</label>
        <input type="text" id="node-input-password" placeholder="Password">
    </div>
    <div style="margin: 0">
        <input type="checkbox" id="node-input-gateway" placeholder="gateway" value="Gateway">Gateway<br>
        <input type="checkbox" id="node-input-switch" placeholder="switch" value="Switch">Wireless switch<br>
        <input type="checkbox" id="node-input-86sw1" placeholder="86sw1" value="86sw1">Wireless switch(One Button)<br>
        <input type="checkbox" id="node-input-86sw2" placeholder="86sw2" value="86sw2">Wrieless switch(Two button)<br>
        <input type="checkbox" id="node-input-cube" placeholder="cube" value="Cube">Cube<br>
        <input type="checkbox" id="node-input-sensor_ht" placeholder="sensor_ht" value="Sensor_ht">Sensor_ht<br>
        <input type="checkbox" id="node-input-motion" placeholder="motion" value="motion">Motion<br>
        <input type="checkbox" id="node-input-sensor_motion_aq2" placeholder="sensor_motion_aq2" value="sensor_motion_aq2">Motion aquara<br>
        <input type="checkbox" id="node-input-magnet" placeholder="magnet" value="Magnet">Magnet<br>
        <input type="checkbox" id="node-input-plug" placeholder="plug" value="plug">Plug<br>
        <input type="checkbox" id="node-input-86plug" placeholder="86plug" value="86plug">Embeddable plug<br>
        <input type="checkbox" id="node-input-natgas" placeholder="natgas" value="natgas">Gas sensor<br>
    </div>


</script>
<script type="text/x-red" data-help-name="xiaomi-smart-home">
<h3>Module for write/read data from mi home devices</h3>
<h4><b>Name description:</b></h4>
<p>Name - any name for the module <br>
Password - your key whith mobile application</p>
<h4><b>The data read device:</b></h4>
<p>Status - status device <br>
  no_motion - how long there's been no movement <br>
  voltage - voltage device <br>
  temperature - temperature device <br>
  humidity - humidity device <br>
  rotate - how many degrees rotated device <br>
  ip - ip device <br>
  channel_0 - status wireless button <br>
  channel_1 - status wireless button <br>
  other properties will displayed in msg.payload as string.
</p>
<h4><b>Status on the module:</b></h4>
<p>1. Not found password - you will set password in fiels 'password' <br>
   2. password not current - you set not valid password <br>
   3. Not ready for send command - you have to wait a bit <br>
   4. Ready for send command - module ready for send command
</p>
<h4><b>Inputs properties module:</b></h4>
<p>Next properties need write in module 'inject' having the format JSON: <br>
  model - the model device (have only been tested on gateway) <br>
  sid - the identification number device <br>
  command - the command, example: rgb, mid, and etc. <br>
  value - the value of the command <br>
  Example string in format json: <br>
  {"model": "gateway", "sid": "you sid", "command": "rgb", "value": you value, example: 4286578816}
  at the moment I know of 2 commands:
  1. rgb - set color for gateway.
  2. mid - play music with 0 to 13.
</p>
<a href="https://flows.nodered.org/flow/a35d538fcb9be04fcc2f2fcfc88ed9b3">Example flow</a>
<h4><b>Suppotr all device:</b></h4>
<p><b>Attetion:</b> This experimental technology, so may experience crashes <br>
  In such devices the following list of properties of the output: <br>
  topic - The sid device <br>
  payload - The data that came with the device(may be not the correct types) <br>
  model - The name device
</p>


</script>
<script type="text/javascript">
    RED.nodes.registerType('xiaomi-smart-home', {
        category: 'input',
        color: "#329D27",
        defaults: {
            name: {value: ""},
            password: {value: ""},
            sid: {value: ""},
            gateway: {value: true},
            switch: {value: true},
            cube: {value: true},
            sensor_ht: {value: true},
            motion: {value: true},
            'sensor_motion_aq2': {value: true},
            magnet: {value: true},
            plug: {value: true},
            '86plug': {value: true},
            '86sw1': {value: true},
            '86sw2': {value: true},
            natgas: {value: true},
        },
        inputs: 1,
        outputs: 1,
        icon: "bridge.png",
        label: function () {
            return this.name || "xiaomi-smart-home"
        },
    });
</script>
